# SELECT 〜 WHERE

各データ型での選択

## 問題

1. 特定の市町村についての法人だけの一覧
2. 上記のうちさらに特定の更新日付範囲の一覧
3. 上記のうちさらに訂正区分が`true`の一覧

## SQL

```sql
SELECT
  city_name,
  city_code,
  corporate_number, 
  name 
FROM corporations 
WHERE
  city_name = '米子市'
LIMIT 10;
```
```sql
SELECT
  city_name,
  city_code,
  corporate_number, 
  name 
FROM corporations 
WHERE
  city_code = 202
LIMIT 10;
```
```sql
SELECT
  city_name,
  city_code,
  corporate_number, 
  name, 
  update_date,
  correct 
FROM corporations 
WHERE
  city_code = 202
  AND update_date >= '2016-04-01'
  AND correct = true;
```

追加した条件をコメントにして一つ前に戻した例。　

```sql
SELECT
  city_name,
  city_code,
  corporate_number, 
  name, 
  update_date,
  correct 
FROM corporations 
WHERE
  city_code = 202
  -- AND update_date >= '2016-04-01'
  -- AND correct = true
  ;
```

## 結果

```
        city_name        | city_code | corporate_number |            name            
-------------------------+-----------+------------------+----------------------------
 米子市                  |       202 | 1270005002939    | 稲荷神社
 米子市                  |       202 | 1270005004002    | ＮＰＯ法人サポートイルカ
 米子市                  |       202 | 4270001005620    | 株式会社ＳＴＥＰ
 米子市                  |       202 | 5270002006831    | 有限会社美宏
 米子市                  |       202 | 5270002008720    | 有限会社長寿の家
 米子市                  |       202 | 1270001006761    | サポートハウス米子株式会社
 米子市                  |       202 | 1270002006109    | 有限会社ジャスト
 米子市                  |       202 | 4270001004655    | 株式会社ファルコン
 米子市                  |       202 | 6270002007283    | 有限会社山本釣具
 米子市                  |       202 | 7270002009188    | 有限会社ラブリーガーデン
(10 rows)
```

```
        city_name        | city_code | corporate_number |            name            
-------------------------+-----------+------------------+----------------------------
 米子市                  |       202 | 1270005002939    | 稲荷神社
 米子市                  |       202 | 1270005004002    | ＮＰＯ法人サポートイルカ
 米子市                  |       202 | 4270001005620    | 株式会社ＳＴＥＰ
 米子市                  |       202 | 5270002006831    | 有限会社美宏
 米子市                  |       202 | 5270002008720    | 有限会社長寿の家
 米子市                  |       202 | 1270001006761    | サポートハウス米子株式会社
 米子市                  |       202 | 1270002006109    | 有限会社ジャスト
 米子市                  |       202 | 4270001004655    | 株式会社ファルコン
 米子市                  |       202 | 6270002007283    | 有限会社山本釣具
 米子市                  |       202 | 7270002009188    | 有限会社ラブリーガーデン
(10 rows)
```

```
        city_name        | city_code | corporate_number |                   name                   |     update_date     | correct 
-------------------------+-----------+------------------+------------------------------------------+---------------------+---------
 米子市                  |       202 | 1270005004002    | ＮＰＯ法人サポートイルカ                 | 2016-04-22 00:00:00 | t
 米子市                  |       202 | 3270005004768    | ＮＰＯ法人スタート                       | 2016-04-22 00:00:00 | t
 米子市                  |       202 | 4270005003918    | ＮＰＯ法人日本野鳥の会鳥取県支部         | 2016-04-22 00:00:00 | t
 米子市                  |       202 | 4270005005187    | ＮＰＯ法人いるか                         | 2016-04-25 00:00:00 | t
 米子市                  |       202 | 5270005003974    | ＮＰＯ法人おりもんや                     | 2016-04-22 00:00:00 | t
 米子市                  |       202 | 5270005003982    | ＮＰＯ法人プロデュース・ハレ             | 2016-04-22 00:00:00 | t
 米子市                  |       202 | 6270005003965    | ＮＰＯ法人ワークショップ・アクティブ     | 2016-04-25 00:00:00 | t
 米子市                  |       202 | 6270005004732    | ＮＰＯ法人ライヴ                         | 2016-04-25 00:00:00 | t
 米子市                  |       202 | 8270005003922    | ＮＰＯ法人しんらい                       | 2016-04-25 00:00:00 | t
 米子市                  |       202 | 8270005005142    | ＮＰＯ法人とっとり母力リンク・ぽこりっと | 2016-04-25 00:00:00 | t
 米子市                  |       202 | 9270005003987    | ＮＰＯ法人えがおサポート                 | 2016-04-25 00:00:00 | t
 米子市                  |       202 | 9270005005141    | ＮＰＯ法人ライセンスワーク               | 2016-04-25 00:00:00 | t
(12 rows)
```

## 解説

標準SQLのデータ型のうち、使用頻度のとくに高い4つについての絞り込み条件です。まずはカラム値を定数と比較する条件式についての定数の書き方の基本です。

- 文字列型  
 - 列定義　`city_name character(20)`
 - 定数　`'米子市'`
- 数値型：整数
 - 列定義　`city_code int`
 - 定数　`202`
- 日時型：時刻印型
 - 列定義　`update_date timestamp`
 - 定数　`'2016-04-01'`
- 真理値型
 - 列定義　`correct boolean`
 - 定数　`true`

そして比較条件式を `AND` でつないで絞り込みの絞り込み（論理積）も使いました。
